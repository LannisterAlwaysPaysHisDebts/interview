1. 简述你对小程序开发的理解, 小程序开发与普通后台开发最大的区别是什么?

2. 请你简单说说你们公司现在的业务，会问你一些你的看法，是否看好等等

3. 是否用过消息中间件，你们的用途是什么，你知道消费者组的概念吗

4. 说说你用过的RPC框架，假如让你实现RPC框架的序列化部分你会怎么做

5. 使用go实现tps统计，聊聊你的思路

6. 说说LinkedHashMap

7. 在面对未知的流量暴增，可以预先怎么处理

8. 如何限流，限流算法，对于ddos攻击怎么处理

9. 守护进程是什么，怎么实现

10. 怎么查看Linux服务器的负载，及判断哪些操作引起的负载过高

11. nginx的负载均衡算法

12. 实现一个并发模型。生产者消费者 (在线写)

13. 线上突然大量502.怎么排查?

14. 架构设计-微信朋友圈

15. 描述 APP push推送架构设计

16. 为什么你们把php换成go ?优点是什么？为什么单机 go 的吞吐比php 高?原因是?

17. 举几个例子 说明下 你对代码做优化的地方？提升的原因是什么？

18. 你怎么评估重构业务。重构的标准是什么？怎么灰度切换？

19. 给你1亿个URL 。爬取信息。会遇到什么问题？从 CPU 磁盘 网络 等方面。

20. 设计一个抢红包的系统架构、如何保证每个人抢到、讨论了半天、如何抗住流量?

21. 如果让你负责一个项目。你怎么保证项目高效稳定零BUG?

22. 假设我们现在要做一对一视频聊天，每日 DAU 可能达到几十万以上，后端怎么实现一对一匹配的算法？还有，怎么实现快速的匹配服务器不会有压力问题？
    我想一下。用户登录的时候，如果未开始匹配，可以把用户放到 redis 里的 set 集合里，通过 SRANDMEMBER 命令随机抽取人出来就好了 ，至于 redis 的 value 最大可以保持 512m 数据，也就是理论上我们承载可以达到上千万上亿用户都不是问题，至于要保持 redis 的高可用，可以用 rdb 或 aof 做数据持久化，另外，redis 也有哨兵模式，主 redis 挂了也可以选举抽取空闲的 redis 服务器顶上


23. IM、中间件: 
这两者可以深入语言细节，尤其是对于优化、GC等问题进行探讨。除此之外，IM还可以深入提问高并发的问题，中间件可以提问具体的实现细节、选型、方案等，中间件还可以提问C++和JVM的问题。请慎用简历特别唬人，但是不懂jvm的同学。如果一个自称中间件XX年的人不仅不懂jvm，还不懂JAVA或者C或者C++，请报警。


24. 在面对未知的流量暴增，可以预先怎么处理

25. 如何限流，限流算法，对于ddos 攻击怎么处理

26. RPC相对于传统的API调用的优点

27. 服务调度中心的感知与动态上下线

28. 微信支付这块，在支付完微信通知这里，收到两次微信相同的支付通知，怎么防止重复消费（类似接口的幂等性），说了借助Redis或者数据库的事务

29. 项目里的消息推送怎么做的（业务有关）

30. 用过什么消息中间件之类吗

31. 生产者消费者模式，手写代码

32. 看过啥源码?

33. 单点登录，tcp粘包

34. 手写洗牌

35. 接口kps测试

36. cap理论，举例; LRU算法，LFU


37. 智力题：1000瓶酒中有1瓶毒酒，10只老鼠，7天后毒性才发作，第8天要卖了，怎么求那瓶毒酒？
    知识点：二进制。
    解题思路：把10只老鼠当成10位编码,喂酒代表1不喂酒代表0;将1000瓶酒从1到1000进行2进制编码,按照编码给老鼠喂酒.等毒性发作就可以根据老鼠死亡的编号来知道是第几瓶酒有毒.


38. 简单dp题，n*n矩阵从左上角到右下角有多少种走法（只限往下和往右走）

39. 看什么书，怎么学习

40. 唯一订单号问题，并发量高的话怎么解决

41. hash表设计要注意什么问题

42. K8S 容器化之后应用容器里几乎没有什么可用的调试工具，可以利用容器 Namespace 共享的思路，启动一个包含各种调试工具（比如 netstat, gdb）的容器，加入到 pod 的 pid、net 等 namespace 中， 实现对任意 pod 的 debug 功能。现在希望利用 kubectl plugin 机制实现一个插件，用于 debug 任意一个 pod 里的容器，达到 kubectl exec 的使用体验.

43. 问项目经历, 聊”数据同步”

44. 聊项目, 警报怎么做的, 统一接入监控项怎么做的

45. 聊项目, 配置中心项目, 问实时配置推送怎么做

46. 讨论为什么选择所有的组件依赖放在配置中心中控制

47. 我现在要做一个限流功能, 怎么做?
    1. 令牌桶这个限流要做成分布式的, 怎么做?
        令牌桶维护到 Redis 里，每个实例起一个线程抢锁，抢到锁的负责定时放令牌
    
    2. 怎么抢锁?Redis setnx, 锁怎么释放?抢到锁后设置过期时间，线程本身退出时主动释放锁，假如线程卡住了，锁过期那么其它线程可以继续抢占,加了超时之后有没有可能在没有释放的情况下, 被人抢走锁,有可能，单次处理时间过长，锁泄露,怎么解决?

    3. 换 zk，用心跳解决,不用 zk 的心跳, 可以怎么解决这个问题呢?
    每次更新过期时间时，Redis 用 MULTI 做 check-and-set 检查更新时间是否被其他线程修改了，假如被修改了，说明锁已经被抢走，放弃这把锁

    假如这个限流希望做成可配置的, 需要有一个后台管理系统随意对某个 api 配置全局流量, 怎么做？在 Redis 里存储每个 API 的令牌桶 key，假如存在这个 key，则需要按上述逻辑进行限流

48. 某一个业务中现在需要生成全局唯一的递增 ID, 并发量非常大, 怎么做
    snowflake (这个其实答得不好，snowflake 无法实现全局递增，只能实现全局唯一，单机递增，面试结束后就想到了类似 TDDL 那样一次取一个 ID 段，放在本地慢慢分配的策略）

49. 考虑一个业务场景: 头条的文章的评论量非常大, 比如说一篇热门文章就有几百万的评论, 设计一个后端服务, 实现评论的时序展示与分页
    我: 需不需要支持页码直接跳转?面试官: 支持和不支持两种场景都考虑一下我: 不需要支持页码翻页就传评论 id 用 offset 翻页

    假如用 id 翻页的方式, 数据库表如何设计? 索引如何设计?(文章id, 评论id) 建联合索引，评论 id 需递增,

    假如量很大, 你觉得需要分库分表吗? 怎么分?需要分，分表有个权衡，按文章 id 分表，读逻辑简单，但写有热点问题；按评论 id 分表，读逻辑复杂，但写压力就平均了。写是要首先保证的，而读总是有缓存等方案来折中，因此按评论 id 分表好。

    分库分表后怎么查询分页?每张表查 N 条数据由 client 或 proxy merge
    分库分表后怎么保证主键仍然是递增的?讲了 TDDL 的办法：有一张专门用于分配主键的表，每次用乐观锁的方式尝试去取一批主键过来分配，假如乐观锁失败就重试

    现在需要支持深分页, 页码直接跳转, 怎么实现?不能做精准深分页，否则压力太大，找产品进行妥协，在50或100页后数据分页是否可以不完全精确，假如可以，那么缓存深页码的起始评论 id


50. 瞬时写入量很大可能会打挂存储, 怎么保护?断路器
    断路器内部怎么实现的?可以用 ringbuffer
    断路器会造成写入失败, 假如我们不允许写入失败呢?
    先写进消息队列，削峰填谷异步落库
    


